---
// Generated by Copilot
export interface Props {
  diagram: string;
  id?: string;
}

const { diagram, id = `mermaid-${Math.random().toString(36).substr(2, 9)}` } = Astro.props;
---

<div class="mermaid-container">
  <pre class="mermaid" id={id}>{diagram}</pre>
</div>

<script>
  // Import Mermaid dynamically to avoid SSR issues
  import('https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs').then((mermaid) => {
    mermaid.default.initialize({
      startOnLoad: true,
      theme: 'default',
      flowchart: {
        htmlLabels: false,
        curve: 'basis'
      }
    });
  });
</script>

<style>
  .mermaid-container {
    margin: 1rem 0;
    padding: 1rem;
    border: 1px solid #e1e5e9;
    border-radius: 6px;
    background: #f8f9fa;
  }

  .mermaid {
    text-align: center;
    margin: 0;
    padding: 0;
    background: transparent;
  }
</style>
